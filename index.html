<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Play Tic Tac Toe online - Two player mode or challenge our AI bot. Free, fun, and responsive game.">
    <meta name="keywords" content="tic tac toe, game, online game, two player, AI bot">
    
    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://pagead2.googlesyndication.com https://www.googletagmanager.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self'; connect-src 'self' https://pagead2.googlesyndication.com; frame-src https://googleads.g.doubleclick.net https://www.google.com;">
    
    <title>Tic Tac Toe - Play Online Free | Two Player & Bot Mode</title>
    
    <!-- Google AdSense Code -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3532651292710019"
     crossorigin="anonymous"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --success: #48bb78;
            --danger: #f56565;
            --warning: #ed8936;
            --light-bg: #f7fafc;
            --dark-text: #2d3748;
            --shadow-sm: 0 2px 8px rgba(0,0,0,0.1);
            --shadow-md: 0 4px 16px rgba(0,0,0,0.15);
            --shadow-lg: 0 20px 60px rgba(0,0,0,0.3);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Animated background circles */
        body::before,
        body::after {
            content: '';
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
            animation: float 20s infinite ease-in-out;
        }

        body::before {
            width: 400px;
            height: 400px;
            background: white;
            top: -100px;
            left: -100px;
            animation-delay: 0s;
        }

        body::after {
            width: 300px;
            height: 300px;
            background: white;
            bottom: -50px;
            right: -50px;
            animation-delay: 7s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            33% { transform: translate(50px, -50px) scale(1.1); }
            66% { transform: translate(-30px, 30px) scale(0.9); }
        }

        /* Ad container styles */
        .ad-container {
            background: white;
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-md);
            max-width: 728px;
            width: 100%;
            min-height: 90px;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .container {
            background: white;
            border-radius: 24px;
            padding: 40px;
            box-shadow: var(--shadow-lg);
            max-width: 550px;
            width: 100%;
            position: relative;
            z-index: 1;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            text-align: center;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            font-size: 2.8em;
            font-weight: 800;
            letter-spacing: -1px;
        }

        .subtitle {
            text-align: center;
            color: #718096;
            font-size: 0.95em;
            margin-bottom: 30px;
        }

        /* Score Board */
        .scoreboard {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 15px;
            margin-bottom: 25px;
            padding: 20px;
            background: var(--light-bg);
            border-radius: 16px;
        }

        .score-item {
            text-align: center;
            padding: 12px;
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            transition: transform 0.2s;
        }

        .score-item:hover {
            transform: translateY(-2px);
        }

        .score-label {
            font-size: 0.85em;
            color: #718096;
            margin-bottom: 5px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .score-value {
            font-size: 2em;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .score-item.player-x .score-value {
            background: linear-gradient(135deg, #667eea, #4299e1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .score-item.player-o .score-value {
            background: linear-gradient(135deg, #764ba2, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .score-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            color: #cbd5e0;
        }

        .mode-selection {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
            background: var(--light-bg);
            padding: 6px;
            border-radius: 14px;
        }

        .mode-btn {
            flex: 1;
            padding: 14px 20px;
            border: none;
            background: transparent;
            color: #718096;
            border-radius: 10px;
            cursor: pointer;
            font-size: 15px;
            font-weight: 700;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .mode-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s;
            z-index: -1;
        }

        .mode-btn:hover {
            transform: translateY(-1px);
        }

        .mode-btn.active {
            color: white;
            box-shadow: var(--shadow-sm);
        }

        .mode-btn.active::before {
            opacity: 1;
        }

        .game-info {
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.3em;
            color: var(--dark-text);
            font-weight: 600;
            min-height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .game-info .emoji {
            font-size: 1.2em;
            animation: bounce 0.6s ease-in-out;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 30px;
            padding: 8px;
            background: var(--light-bg);
            border-radius: 18px;
        }

        .cell {
            aspect-ratio: 1;
            background: white;
            border: 3px solid transparent;
            border-radius: 14px;
            font-size: 3.5em;
            font-weight: 900;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }

        .cell::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .cell:hover:not(:disabled) {
            border-color: var(--primary);
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
        }

        .cell:hover:not(:disabled)::before {
            opacity: 0.05;
        }

        .cell:disabled {
            cursor: not-allowed;
        }

        .cell:active:not(:disabled) {
            transform: scale(0.95);
        }

        .cell.x {
            color: #667eea;
            animation: popIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .cell.o {
            color: #764ba2;
            animation: popIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        .cell.winning {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white !important;
            animation: winPulse 0.6s ease-in-out;
            border-color: #48bb78;
        }

        @keyframes popIn {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes winPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 0 0 rgba(72, 187, 120, 0.7);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 0 10px rgba(72, 187, 120, 0);
            }
        }

        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 25px;
        }

        .btn {
            flex: 1;
            padding: 16px 24px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: var(--shadow-sm);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: var(--light-bg);
            color: var(--dark-text);
            border: 2px solid #e2e8f0;
        }

        .btn-secondary:hover {
            background: #e2e8f0;
            transform: translateY(-2px);
        }

        .footer {
            text-align: center;
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid var(--light-bg);
            font-size: 0.9em;
            color: #718096;
        }

        .footer a {
            color: var(--primary);
            text-decoration: none;
            margin: 0 12px;
            font-weight: 600;
            transition: all 0.2s;
        }

        .footer a:hover {
            color: var(--secondary);
            text-decoration: underline;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal.active {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            border-radius: 24px;
            padding: 40px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 25px 50px rgba(0,0,0,0.3);
            animation: slideDown 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 32px;
            cursor: pointer;
            color: #a0aec0;
            background: var(--light-bg);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: #e2e8f0;
            color: var(--dark-text);
            transform: rotate(90deg);
        }

        .modal-content h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 2em;
            font-weight: 800;
        }

        .modal-content h3 {
            color: var(--secondary);
            margin-top: 25px;
            margin-bottom: 12px;
            font-size: 1.3em;
            font-weight: 700;
        }

        .modal-content p, .modal-content ul {
            margin-bottom: 15px;
            line-height: 1.8;
            color: #4a5568;
        }

        .modal-content ul {
            padding-left: 25px;
        }

        .modal-content li {
            margin-bottom: 10px;
        }

        .modal-content a {
            color: var(--primary);
            text-decoration: underline;
            font-weight: 600;
            transition: color 0.2s;
        }

        .modal-content a:hover {
            color: var(--secondary);
        }

        /* Confetti animation for wins */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--primary);
            position: absolute;
            animation: confetti-fall 3s linear forwards;
            z-index: 9999;
        }

        @keyframes confetti-fall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        @media (max-width: 600px) {
            .container {
                padding: 24px;
            }

            h1 {
                font-size: 2.2em;
            }

            .cell {
                font-size: 2.5em;
            }

            .scoreboard {
                gap: 10px;
                padding: 15px;
            }

            .score-value {
                font-size: 1.6em;
            }

            .ad-container {
                min-height: 50px;
            }

            .game-info {
                font-size: 1.1em;
            }

            .controls {
                flex-direction: column;
            }
        }

        /* Loading animation */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Top Ad Banner -->
    <div class="ad-container">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-3532651292710019"
             data-ad-slot="YOUR_AD_SLOT_ID"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
        <script>
             (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>

    <div class="container">
        <h1>Tic Tac Toe</h1>
        <p class="subtitle">Challenge a friend or test your skills against AI</p>
        
        <!-- Scoreboard -->
        <div class="scoreboard">
            <div class="score-item player-x">
                <div class="score-label">Player X</div>
                <div class="score-value" id="scoreX">0</div>
            </div>
            <div class="score-divider">:</div>
            <div class="score-item player-o">
                <div class="score-label" id="playerOLabel">Player O</div>
                <div class="score-value" id="scoreO">0</div>
            </div>
        </div>

        <div class="mode-selection">
            <button class="mode-btn active" onclick="setMode('two-player')">👥 Two Player</button>
            <button class="mode-btn" onclick="setMode('bot')">🤖 vs Bot</button>
        </div>

        <div class="game-info" id="gameInfo">
            <span>Player X's Turn</span>
        </div>

        <div class="board" id="board">
            <button class="cell" onclick="makeMove(0)"></button>
            <button class="cell" onclick="makeMove(1)"></button>
            <button class="cell" onclick="makeMove(2)"></button>
            <button class="cell" onclick="makeMove(3)"></button>
            <button class="cell" onclick="makeMove(4)"></button>
            <button class="cell" onclick="makeMove(5)"></button>
            <button class="cell" onclick="makeMove(6)"></button>
            <button class="cell" onclick="makeMove(7)"></button>
            <button class="cell" onclick="makeMove(8)"></button>
        </div>

        <div class="controls">
            <button class="btn btn-primary" onclick="resetGame()">🔄 New Game</button>
            <button class="btn btn-secondary" onclick="resetScores()">📊 Reset Scores</button>
        </div>

        <div class="footer">
            <a href="#" onclick="openModal(event, 'privacy')">Privacy Policy</a>
            <a href="#" onclick="openModal(event, 'tos')">Terms of Service</a>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('privacy')">&times;</button>
            <h2>Privacy Policy</h2>
            <p><strong>Last Updated:</strong> October 3, 2025</p>
            
            <h3>1. Introduction</h3>
            <p>This Privacy Policy explains how we collect, use, and protect your information when you use our Tic Tac Toe game ("the Game"). We are committed to protecting your privacy and complying with applicable data protection laws.</p>

            <h3>2. Information We Collect</h3>
            <p>We collect the following types of information:</p>
            <ul>
                <li><strong>Automatically Collected Information:</strong> We may collect technical information such as your IP address, browser type, device type, and operating system through cookies and similar technologies.</li>
                <li><strong>Game Data:</strong> We store game state locally in your browser using localStorage. This data never leaves your device.</li>
                <li><strong>Advertising Data:</strong> We use Google AdSense to display advertisements. Google may collect and use data as described in their privacy policy.</li>
            </ul>

            <h3>3. How We Use Your Information</h3>
            <p>We use collected information for:</p>
            <ul>
                <li>Providing and improving the Game</li>
                <li>Displaying relevant advertisements through Google AdSense</li>
                <li>Analyzing usage patterns to enhance user experience</li>
                <li>Complying with legal obligations</li>
            </ul>

            <h3>4. Google AdSense</h3>
            <p>This Game uses Google AdSense to display advertisements. Google uses cookies to serve ads based on your prior visits to our website or other websites. You may opt out of personalized advertising by visiting <a href="https://www.google.com/settings/ads" target="_blank" rel="noopener noreferrer">Google Ads Settings</a>.</p>
            <p>Google's use of advertising cookies enables it and its partners to serve ads based on your visit to this site and/or other sites on the Internet. For more information, visit <a href="https://policies.google.com/technologies/ads" target="_blank" rel="noopener noreferrer">Google's Advertising Privacy Policy</a>.</p>

            <h3>5. Cookies and Tracking Technologies</h3>
            <p>We use cookies and similar technologies for:</p>
            <ul>
                <li>Storing game preferences</li>
                <li>Enabling advertising through Google AdSense</li>
                <li>Analyzing website traffic and user behavior</li>
            </ul>
            <p>You can control cookie settings through your browser preferences.</p>

            <h3>6. Third-Party Services</h3>
            <p>We use third-party services including:</p>
            <ul>
                <li><strong>Google AdSense:</strong> For displaying advertisements</li>
            </ul>
            <p>These services have their own privacy policies governing their use of your information.</p>

            <h3>7. Data Retention</h3>
            <p>Game data stored locally in your browser persists until you clear your browser data. We do not store personal information on our servers.</p>

            <h3>8. Children's Privacy</h3>
            <p>Our Game is not directed to children under 13. We do not knowingly collect personal information from children under 13. If you believe we have collected information from a child under 13, please contact us immediately.</p>

            <h3>9. Your Rights</h3>
            <p>Depending on your location, you may have rights including:</p>
            <ul>
                <li>Access to your personal information</li>
                <li>Correction of inaccurate data</li>
                <li>Deletion of your data</li>
                <li>Objection to processing</li>
                <li>Data portability</li>
            </ul>

            <h3>10. International Data Transfers</h3>
            <p>Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place for such transfers.</p>

            <h3>11. Security</h3>
            <p>We implement reasonable security measures to protect your information. However, no method of transmission over the Internet is 100% secure.</p>

            <h3>12. Changes to This Policy</h3>
            <p>We may update this Privacy Policy periodically. We will notify you of significant changes by posting the new policy on this page with an updated effective date.</p>

            <h3>13. Contact Us</h3>
            <p>If you have questions about this Privacy Policy, please contact us through our GitHub repository.</p>
        </div>
    </div>

    <!-- Terms of Service Modal -->
    <div id="tosModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('tos')">&times;</button>
            <h2>Terms of Service</h2>
            <p><strong>Last Updated:</strong> October 3, 2025</p>
            
            <h3>1. Acceptance of Terms</h3>
            <p>By accessing and using this Tic Tac Toe game ("the Game"), you accept and agree to be bound by these Terms of Service ("Terms"). If you do not agree to these Terms, please do not use the Game.</p>

            <h3>2. Description of Service</h3>
            <p>The Game is a free online tic-tac-toe game offering two-player and single-player (vs bot) modes. The service is provided "as is" and may be modified or discontinued at any time without notice.</p>

            <h3>3. Use License</h3>
            <p>We grant you a limited, non-exclusive, non-transferable license to access and use the Game for personal, non-commercial purposes. You may not:</p>
            <ul>
                <li>Modify, copy, or create derivative works of the Game</li>
                <li>Reverse engineer, decompile, or disassemble the Game</li>
                <li>Use the Game for any illegal or unauthorized purpose</li>
                <li>Attempt to gain unauthorized access to any part of the Game</li>
                <li>Use automated systems or bots to access the Game</li>
                <li>Interfere with or disrupt the Game's functionality</li>
            </ul>

            <h3>4. Intellectual Property</h3>
            <p>All content, features, and functionality of the Game are owned by us or our licensors and are protected by copyright, trademark, and other intellectual property laws.</p>

            <h3>5. Advertising</h3>
            <p>The Game displays advertisements through Google AdSense. By using the Game, you agree to the display of such advertisements. We are not responsible for the content of third-party advertisements.</p>

            <h3>6. User Conduct</h3>
            <p>You agree to use the Game in compliance with all applicable laws and regulations.</p>

            <h3>7. Privacy</h3>
            <p>Your use of the Game is also governed by our Privacy Policy. Please review our Privacy Policy to understand our practices regarding your information.</p>

            <h3>8. Disclaimer of Warranties</h3>
            <p>THE GAME IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED.</p>

            <h3>9. Limitation of Liability</h3>
            <p>TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES.</p>

            <h3>10. Changes to Terms</h3>
            <p>We reserve the right to modify these Terms at any time. Continued use of the Game after changes constitutes acceptance of modified Terms.</p>

            <h3>11. Contact Information</h3>
            <p>For questions about these Terms, please contact us through our GitHub repository.</p>
        </div>
    </div>

    <script>
        'use strict';
        
        let board = ['', '', '', '', '', '', '', '', ''];
        let currentPlayer = 'X';
        let gameMode = 'two-player';
        let gameActive = true;
        let scores = { X: 0, O: 0 };
        let winningCells = [];

        const winPatterns = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8],
            [0, 3, 6], [1, 4, 7], [2, 5, 8],
            [0, 4, 8], [2, 4, 6]
        ];

        // Load scores from localStorage
        function loadScores() {
            const savedScores = localStorage.getItem('tictactoe_scores');
            if (savedScores) {
                scores = JSON.parse(savedScores);
                updateScoreDisplay();
            }
        }

        // Save scores to localStorage
        function saveScores() {
            localStorage.setItem('tictactoe_scores', JSON.stringify(scores));
        }

        // Update score display
        function updateScoreDisplay() {
            document.getElementById('scoreX').textContent = scores.X;
            document.getElementById('scoreO').textContent = scores.O;
        }

        // Reset scores
        function resetScores() {
            scores = { X: 0, O: 0 };
            saveScores();
            updateScoreDisplay();
            showNotification('Scores reset! 🔄');
        }

        function setMode(mode) {
            gameMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update Player O label
            const playerOLabel = document.getElementById('playerOLabel');
            playerOLabel.textContent = mode === 'bot' ? 'Bot' : 'Player O';
            
            resetGame();
        }

        function makeMove(index) {
            if (!gameActive || board[index] !== '' || typeof index !== 'number') return;

            board[index] = currentPlayer;
            updateBoard();

            const winPattern = checkWin();
            if (winPattern) {
                winningCells = winPattern;
                highlightWinningCells();
                const infoElement = document.getElementById('gameInfo');
                infoElement.innerHTML = `<span class="emoji">🎉</span> Player ${currentPlayer} Wins!`;
                scores[currentPlayer]++;
                saveScores();
                updateScoreDisplay();
                createConfetti();
                gameActive = false;
                return;
            }

            if (checkDraw()) {
                const infoElement = document.getElementById('gameInfo');
                infoElement.innerHTML = `<span class="emoji">🤝</span> It's a Draw!`;
                gameActive = false;
                return;
            }

            currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
            updateGameInfo();

            if (gameMode === 'bot' && currentPlayer === 'O' && gameActive) {
                setTimeout(botMove, 500);
            }
        }

        function botMove() {
            let availableMoves = board.map((cell, index) => cell === '' ? index : null).filter(val => val !== null);
            
            if (availableMoves.length === 0) return;

            // Try to win
            for (let move of availableMoves) {
                board[move] = 'O';
                if (checkWin()) {
                    updateBoard();
                    const winPattern = checkWin();
                    winningCells = winPattern;
                    highlightWinningCells();
                    const infoElement = document.getElementById('gameInfo');
                    infoElement.innerHTML = `<span class="emoji">🤖</span> Bot Wins!`;
                    scores.O++;
                    saveScores();
                    updateScoreDisplay();
                    gameActive = false;
                    return;
                }
                board[move] = '';
            }

            // Block player from winning
            for (let move of availableMoves) {
                board[move] = 'X';
                if (checkWin()) {
                    board[move] = 'O';
                    updateBoard();
                    if (checkDraw()) {
                        const infoElement = document.getElementById('gameInfo');
                        infoElement.innerHTML = `<span class="emoji">🤝</span> It's a Draw!`;
                        gameActive = false;
                    } else {
                        currentPlayer = 'X';
                        updateGameInfo();
                    }
                    return;
                }
                board[move] = '';
            }

            // Take center if available
            if (board[4] === '') {
                makeMove(4);
                return;
            }

            // Take a corner if available
            const corners = [0, 2, 6, 8].filter(i => board[i] === '');
            if (corners.length > 0) {
                makeMove(corners[Math.floor(Math.random() * corners.length)]);
                return;
            }

            // Take a random available move
            const randomMove = availableMoves[Math.floor(Math.random() * availableMoves.length)];
            makeMove(randomMove);
        }

        function checkWin() {
            for (let pattern of winPatterns) {
                if (pattern.every(index => board[index] === currentPlayer && board[index] !== '')) {
                    return pattern;
                }
            }
            return null;
        }

        function checkDraw() {
            return board.every(cell => cell !== '');
        }

        function highlightWinningCells() {
            winningCells.forEach(index => {
                const cells = document.querySelectorAll('.cell');
                cells[index].classList.add('winning');
            });
        }

        function updateBoard() {
            const cells = document.querySelectorAll('.cell');
            cells.forEach((cell, index) => {
                cell.textContent = board[index];
                cell.disabled = board[index] !== '' || !gameActive;
                cell.className = 'cell';
                if (board[index] === 'X') cell.classList.add('x');
                if (board[index] === 'O') cell.classList.add('o');
            });
        }

        function updateGameInfo() {
            const infoElement = document.getElementById('gameInfo');
            if (gameActive) {
                if (gameMode === 'two-player') {
                    infoElement.innerHTML = `<span>Player ${currentPlayer}'s Turn</span>`;
                } else {
                    infoElement.innerHTML = currentPlayer === 'X' ? "<span>Your Turn</span>" : "<span>🤖 Bot's Turn...</span>";
                }
            }
        }

        function resetGame() {
            board = ['', '', '', '', '', '', '', '', ''];
            currentPlayer = 'X';
            gameActive = true;
            winningCells = [];
            updateBoard();
            updateGameInfo();
        }

        function createConfetti() {
            const colors = ['#667eea', '#764ba2', '#48bb78', '#ed8936', '#f56565'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.animationDelay = Math.random() * 0.5 + 's';
                    document.body.appendChild(confetti);
                    setTimeout(() => confetti.remove(), 3000);
                }, i * 30);
            }
        }

        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: white;
                padding: 15px 25px;
                border-radius: 12px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                font-weight: 600;
                z-index: 10000;
                animation: slideIn 0.3s ease-out;
            `;
            document.body.appendChild(notification);
            setTimeout(() => notification.remove(), 2000);
        }

        function openModal(event, type) {
            if (event) event.preventDefault();
            if (type === 'privacy') {
                document.getElementById('privacyModal').classList.add('active');
            } else if (type === 'tos') {
                document.getElementById('tosModal').classList.add('active');
            }
        }

        function closeModal(type) {
            if (type === 'privacy') {
                document.getElementById('privacyModal').classList.remove('active');
            } else if (type === 'tos') {
                document.getElementById('tosModal').classList.remove('active');
            }
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // Initialize game
        loadScores();
        updateBoard();
        updateGameInfo();
    </script>
</body>
</html>
